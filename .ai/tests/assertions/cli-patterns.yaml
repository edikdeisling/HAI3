# CLI Pattern Assertions for HAI3 Commands
# These assertions verify commands follow CLI delegation pattern

# Assertion: Commands must delegate to CLI
cli_delegation:
  description: Commands delegate to hai3 CLI
  assertions:
    - type: contains
      value: "hai3"
    - type: not-contains
      value: "fs.writeFile"
    - type: not-contains
      value: "fs.mkdir"

# Assertion: Commands must reference target files
target_references:
  description: Commands reference .ai/targets/*.md
  assertions:
    - type: javascript
      value: |
        output.includes('.ai/targets/') ||
        output.includes('GUIDELINES.md') ||
        output.includes('SCREENSETS.md') ||
        output.includes('EVENTS.md')

# Assertion: Commands must have validation step
validation_step:
  description: Commands include validation
  assertions:
    - type: javascript
      value: |
        output.includes('arch:check') ||
        output.includes('type-check') ||
        output.includes('lint') ||
        output.includes('validate')

# Assertion: Commands use proper keywords
keywords:
  description: Commands use enforcement keywords
  assertions:
    - type: javascript
      value: |
        const keywords = ['REQUIRED', 'FORBIDDEN', 'STOP', 'MUST', 'NEVER'];
        keywords.some(k => output.includes(k))

# Assertion: Commands have workflow structure
workflow_structure:
  description: Commands have AI WORKFLOW section
  assertions:
    - type: contains
      value: "AI WORKFLOW"

# Assertion: No direct implementation
no_implementation:
  description: Commands dont implement file operations
  assertions:
    - type: not-contains
      value: "import fs from"
    - type: not-contains
      value: "require('fs')"
    - type: not-contains
      value: "writeFileSync"
